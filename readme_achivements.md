# Система начисления баллов и ачивок





## Баллы

Баллы по шкале от 1 до 10 за решенный хакатон

Баллы за победу:

* 1 место (10 баллов)
* 2 место (7 баллов)
* 3 место (5 баллов)





## Ачивки

|Баллы|Название|
|-|-|
|0|Первый шаг|
|10|Постоянный гость|
|25|Ветеран|
|50|Железный хакер|
|100|Хакатон-марафонец|

## 



## Таблицы БД



### Таблица: achievements (шаблоны ачивок)



|Поле|Тип|Описание|
|-|-|-|
|id|VARCHAR|Первичный ключ|
|name|TEXT|Название ачивки|
|description|TEXT|Описание ачивки|
|icon|TEXT|Ссылка на иконку ачивки|
|value|INT|Количество баллов для достижения|

### 

### Таблица: user\_achievements (ачивки у пользователя)



|Поле|Тип|Описание|
|-|-|-|
|db\_id|BIGINT|Первичный ключ (автоинкремент)|
|user\_id|VARCHAR|ID пользователя|
|achievement\_id|TEXT|Список ID ачивок через запятую|

### 

### Таблица: user\_activity (активность пользователя)



|Поле|Тип|Описание|
|-|-|-|
|user\_id|VARCHAR|ID пользователя (первичный ключ)|
|visited\_hackathons|INT|Количество посещенных хакатонов|
|points|INT|Общее количество баллов|

### 

### Таблица: user\_hackathons (хакатоны пользователя)



|Поле|Тип|Описание|
|-|-|-|
|id|BIGINT|Первичный ключ (автоинкремент)|
|user\_id|VARCHAR|ID пользователя|
|hackathon\_id|VARCHAR|ID хакатона|
|hackathon\_name|VARCHAR|Название хакатона|
|points|INT|Количество баллов за хакатон (1-10)|
|placement|INT|Место (1, 2, 3 или null)|
|is\_winner|BOOLEAN|Флаг победителя|
|is\_approved|BOOLEAN|Подтверждено судьей (default: false)|
|processed|BOOLEAN|Баллы начислены (default: false)|
|created\_at|TIMESTAMP|Дата создания записи|
|approved\_at|TIMESTAMP|Дата подтверждения судьей|
|processed\_at|TIMESTAMP|Дата начисления баллов|

## 

## 


## Автоматическое начисление баллов

Система автоматически проверяет новые подтвержденные участия в хакатонах **каждые 30 секунд**.

Процесс:
1. Пользователь добавляет участие в хакатоне (`POST /api/user-hackathons`)
2. Судья подтверждает участие и выставляет баллы/место (`PUT /api/user-hackathons/{id}/approve`)
3. Шедулер находит записи с `is_approved = true` и `processed = false`
4. Начисляет баллы пользователю в `user_activity`
5. Обновляет `processed = true` и `processed_at`
6. Проверяет и начисляет новые ачивки