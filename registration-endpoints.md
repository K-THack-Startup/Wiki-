1. Регистрация пользователя

POST /api/auth/signup

Регистрирует нового пользователя. После успешной регистрации на указанный email отправляется код подтверждения.

Тело запроса (JSON):
json

{
  "fullName": "Иванов Иван Иванович",
  "userName": "ivanov",
  "email": "ivan@example.com",
  "password": "securePassword123"
}

Поля запроса:

    fullName – полное имя (обязательно, от 2 до 100 символов, только буквы, пробелы, дефис, апостроф)

    userName – имя пользователя (уникальное, обязательно)

    email – email (уникальный, обязательно)

    password – пароль (обязательно, от 8 до 100 символов)

Успешный ответ (200 OK):
Возвращает объект созданного пользователя (User). Например:
json

{
  "id": 1,
  "fullName": "Иванов Иван Иванович",
  "userName": "ivanov",
  "email": "ivan@example.com",
  "password": "$2a$10$...",
  "role": "USER",
  "status": "CONFIRMATION"
}

Ошибки:

    400 Bad Request – если userName или email уже заняты, или если валидация полей не пройдена.

    500 Internal Server Error – внутренняя ошибка сервера.

2. Повторная отправка кода подтверждения

POST /api/auth/verify-email/{email}

Отправляет новый код подтверждения на указанный email, если статус пользователя – CONFIRMATION.

Параметры пути:

    email – email пользователя (обязательно)

Успешный ответ (200 OK):
Пустой ответ со статусом 200.

Ошибки:

    400 Bad Request – если пользователь не в статусе CONFIRMATION или email не найден.

    500 Internal Server Error – ошибка отправки email.

3. Подтверждение email с помощью кода

POST /api/auth/verify-email

Подтверждает email пользователя с использованием кода, отправленного на почту.

Тело запроса (JSON):
json

{
  "email": "ivan@example.com",
  "code": "123456"
}

Поля запроса:

    email – email пользователя

    code – 6-значный код подтверждения

Успешный ответ (200 OK):
Текстовое сообщение: "Email verified successfully"

Ошибки:

    400 Bad Request – если код неверен, истёк или email не найден.

    500 Internal Server Error – внутренняя ошибка.

4. Вход в систему (получение JWT)

POST /api/auth/signin

Аутентифицирует пользователя и возвращает JWT-токен.

Тело запроса (JSON):
json

{
  "userName": "ivanov",
  "password": "securePassword123"
}

Поля запроса:

    userName – имя пользователя

    password – пароль

Успешный ответ (200 OK):
json

{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

Ошибки:

    401 Unauthorized – неверные учётные данные или пользователь неактивен (статус не ACTIVE).

5. Административная панель

GET /admin

Доступ только для пользователей с ролью ADMIN.

Заголовки:

    Authorization: Bearer <JWT-токен>

Успешный ответ (200 OK):
Текстовое сообщение: "админка"

Ошибки:

    401 Unauthorized – отсутствует или недействителен токен.

    403 Forbidden – у пользователя нет роли ADMIN.

6. Панель судьи

GET /judge

Доступ только для пользователей с ролью JUDGE.

Заголовки:

    Authorization: Bearer <JWT-токен>

Успешный ответ (200 OK):
Текстовое сообщение: "судья"

Ошибки:

    401 Unauthorized – отсутствует или недействителен токен.

    403 Forbidden – у пользователя нет роли JUDGE.
    404 Not Found – пользователь не найден.

    500 Internal Server Error – внутренняя ошибка.

7. Получение информации о пользователе по ID(личный кабинет)

GET /api/secured/user/{id}

Доступ только для пользователей с ролью USER. Дополнительно проверяется, что возвращаемый объект пользователя соответствует текущему аутентифицированному пользователю (по id).

Заголовки:

    Authorization: Bearer <JWT-токен>

Параметры пути:

    id – идентификатор пользователя (число)

Успешный ответ (200 OK):
Возвращает объект пользователя (User). Пример:
json

{
  "id": 1,
  "fullName": "Иванов Иван Иванович",
  "userName": "ivanov",
  "email": "ivan@example.com",
  "password": "$2a$10$...",
  "role": "USER",
  "status": "ACTIVE"
}

Ошибки:

    401 Unauthorized – отсутствует или недействителен токен.

    403 Forbidden – пользователь не имеет роли USER или ID в пути не совпадает с ID текущего пользователя.

    404 Not Found – пользователь с указанным ID не найден.

    500 Internal Server Error – внутренняя ошибка.
